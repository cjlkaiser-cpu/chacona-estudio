<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chacona BWV 1004 - Plan de Estudio</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Chacona BWV 1004</h1>
                <p class="subtitle">Plan de Estudio</p>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">0/64 completadas</span>
                </div>

                <!-- Botones Backup -->
                <div class="backup-buttons">
                    <button class="backup-btn" id="exportBtn" title="Exportar backup">
                        <span>üì•</span> Exportar
                    </button>
                    <button class="backup-btn" id="importBtn" title="Importar backup">
                        <span>üì§</span> Importar
                    </button>
                    <input type="file" id="importInput" accept=".json" hidden>
                </div>
            </div>

            <nav class="sections-nav" id="sectionsNav">
                <!-- Secci√≥n Re menor I -->
                <div class="section-group">
                    <button class="section-header" data-section="re-menor-1">
                        <span class="section-icon">‚ñº</span>
                        <span class="section-title">Re menor (I)</span>
                        <span class="section-count">1-33</span>
                    </button>
                    <div class="section-items" id="section-re-menor-1"></div>
                </div>

                <!-- Secci√≥n Re Mayor -->
                <div class="section-group">
                    <button class="section-header" data-section="re-mayor">
                        <span class="section-icon">‚ñ∂</span>
                        <span class="section-title">Re Mayor</span>
                        <span class="section-count">34-52</span>
                    </button>
                    <div class="section-items collapsed" id="section-re-mayor"></div>
                </div>

                <!-- Secci√≥n Re menor II -->
                <div class="section-group">
                    <button class="section-header" data-section="re-menor-2">
                        <span class="section-icon">‚ñ∂</span>
                        <span class="section-title">Re menor (II)</span>
                        <span class="section-count">53-64</span>
                    </button>
                    <div class="section-items collapsed" id="section-re-menor-2"></div>
                </div>
            </nav>
        </aside>

        <!-- Mobile menu button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <div class="variation-view" id="variationView">
                <!-- Header -->
                <div class="variation-header">
                    <div class="nav-buttons">
                        <button class="nav-btn" id="prevBtn" title="Anterior">‚óÄ</button>
                        <h2 class="variation-title" id="variationTitle">Variaci√≥n 1 (Tema)</h2>
                        <button class="nav-btn" id="nextBtn" title="Siguiente">‚ñ∂</button>
                    </div>
                    <div class="variation-status">
                        <label class="checkbox-container">
                            <input type="checkbox" id="completedCheckbox">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">Estudiada</span>
                        </label>
                        <span class="date-completed" id="dateCompleted"></span>
                    </div>
                </div>

                <!-- Manuscript Image -->
                <div class="manuscript-section">
                    <h3>Manuscrito</h3>
                    <div class="manuscript-container">
                        <img id="manuscriptImg" src="" alt="Manuscrito de la variaci√≥n">
                    </div>
                </div>

                <!-- Description -->
                <div class="description-section">
                    <h3>Descripci√≥n</h3>
                    <p id="variationDescription"></p>
                </div>

                <!-- Recording Section -->
                <div class="recording-section">
                    <h3>Mis Grabaciones</h3>
                    <div class="recording-container">
                        <!-- Botones grabar/subir (siempre visibles) -->
                        <div class="audio-options" id="audioOptions">
                            <button class="record-btn" id="recordBtn">
                                <span class="record-icon">üé§</span>
                                <span>Grabar</span>
                            </button>
                            <span class="audio-separator">o</span>
                            <input type="file" id="audioInput" accept="audio/*" hidden>
                            <button class="upload-btn" id="uploadBtn">
                                <span class="upload-icon">üìÅ</span>
                                <span>Subir archivo</span>
                            </button>
                        </div>
                        <!-- Estado grabando -->
                        <div class="recorder-active" id="recorderActive" style="display: none;">
                            <div class="recording-indicator">
                                <span class="rec-dot"></span>
                                <span class="rec-text">REC</span>
                                <span class="rec-time" id="recTime">00:00</span>
                            </div>
                            <button class="stop-btn" id="stopBtn">
                                <span>‚ñ†</span> Parar
                            </button>
                        </div>
                        <!-- Lista de grabaciones -->
                        <div class="recordings-list" id="recordingsList"></div>
                    </div>
                </div>

                <!-- My Score Photo Section -->
                <div class="score-photo-section">
                    <h3>Mi Partitura Anotada</h3>
                    <div class="score-photo-container">
                        <div class="photo-upload-area" id="photoUploadArea">
                            <input type="file" id="photoInput" accept="image/*" hidden>
                            <button class="photo-upload-btn" id="photoUploadBtn">
                                <span class="photo-icon">üì∑</span>
                                <span>Subir foto</span>
                            </button>
                            <p class="upload-hint">JPG, PNG, HEIC...</p>
                        </div>
                        <div class="photo-preview-container" id="photoPreviewContainer" style="display: none;">
                            <img id="photoPreview" src="" alt="Mi partitura anotada">
                            <button class="remove-photo-btn" id="removePhotoBtn" title="Eliminar foto">‚úï</button>
                        </div>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="notes-section">
                    <h3>Mis Notas</h3>
                    <textarea id="notesTextarea" placeholder="Escribe tus observaciones, dificultades, ideas de interpretaci√≥n..."></textarea>
                    <div class="notes-footer">
                        <span class="autosave-indicator" id="autosaveIndicator">Guardado autom√°tico</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="js/data.js?v=4"></script>
    <script src="js/app.js?v=4"></script>
</body>
</html>
